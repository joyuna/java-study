# chapter5. 참조 타입
## 5.1 데이터 타입 분류
- 기본 타입(primitive type)
  - 기본 타입을 이용해서 선언된 변수는 `실제 값을 변수 안에 저장한다.`
    - 정수
    - 실수
    - 문자
    - 논리 리터럴
- 참조 타입(reference type)
  - 참조 타입을 이용해서 선언된 변수는 `힙 영역이나 메소드 영역의 메모리의 번지를 값으로 갖는다.`
  즉, 주소를 통해 객체를 참조한다.
    - 배열
    - 열거
    - 클래스
    - 인터페이스

## 5.2 메모리 사용 영역
- java.exe로 JVM이 시작되면 JVM은 운영체제에서 할당받은 메모리 영역(Runtime Data Area)을 세부 영역으로 구분해서 사용한다.
### 1. 메소드(Method) 영역
- JVM이 시작할 때 생성된다.
- 모든 스레드가 공유하는 영역이다.
- 코드에서 사용되는 클래스(~.class)들을 클래스 로더로 읽어 클래스별로 분류해서 저장한다.
  - 런타임 상수풀(runtime constant pool)
  - 필드(field) 데이터
  - 메소드(method) 데이터
  - 메소드 코드
  - 생성자(constructor) 코드 등

### 2. 힙(Heap) 영역
- 객체와 배열이 생성되는 영역이다.
- 힙 영역에 생성된 객체와 배열은 JVM 스택 영역의 변수나 다른 객체의 필드에서 참조한다.
- 사용되지 않는 객체는 Garbage Collector 가 힙 영역에서 자동으로 제거한다.

### 3. JVM 스택(Stack) 영역
- 스레드가 시작될 때 할당된다.
- 각 스레드마다 하나씩 존재한다.
  > #### 🔍 프로세스와 스레드
  > - 프로세스(process)
  >   - 실행 중인 프로그램
  >   - 사용자가 작성한 프로그램이 운영체제에 의해 메모리 공간을 할당받아 실행 중인 것을 말한다.
  >   
  > - 스레드(thread)
  >   - 프로세스(process)내에서 실제로 작업을 수행하는 주체를 말한다.
  >   - 모든 프로세스에는 한 개 이상의 스레드가 존재한다.
  >   - 두 개 이상의 스레드를 가지는 프로세스는 멀티스레드 프로세스(multi-threaded process)라고 한다.
  > 
  > _reference. [TCP SCHOOL 스레드의 개념](http://www.tcpschool.com/java/java_thread_concept)_

- JVM 스택은 메소드를 호출할 때마다 프레임(Frame)을 추가(push)하고 메소드가 종료되면 해당 프레임을 제거(pop)하는 동작을 수행한다.
  - 프레임 내부에는 로컬 변수 스택이 있는데, 기본 타입 변수와 참조 타입 변수가 추가(push)되거나 제거(pop)된다.
  - 변수가 이 영역에 생성되는 시점은 최초로 변수에 값이 저장(초기화)될 때이다.
  - 변수는 선언된 블록 안에서만 스택에 존재하고 블록을 벗어나면 스택에서 제거된다.

## 5.3 참조 변수의 ==, != 연산
- 기본 타입 변수의 ==, != 연산
  - 변수의 값이 같은지, 아닌지 알아볼 때 사용된다.
- 참조 변수의 ==, != 연산
  - 동일한 객체를 참조하는지, 다른 객체를 참조하는지 알아볼 때 사용된다.
  - 참조 타입 변수의 값은 힙 영역의 객체 주소이므로 결국 주소 값을 비교하는 것이 된다.
  - 동일한 주소 값을 갖고 있는 것은 동일한 객체를 참조한다는 의미이다.
    - 동일한 객체를 참조 하는 경우 == 연산의 결과는 true 이고 != 연산의 결과는 false 이다.
    ```java
    refVar1과 refVar2가 서로 다른 객체를 참조하고 있을 때,

    refVar1 == refVar2 결과: false
    fefVar1 != refVar2 결과: true
    ```
    ```java
    refVar2과 refVar3가 동일한 객체를 참조하고 있을 때,

    refVar2 == refVar3 결과: true
    fefVar2 != refVar3 결과: false
    ```
    
## 5.4 null과 NullPointerException
### 1. null
- 참조 타입 변수는 힙 영역의 객체를 참조하지 않는다는 뜻으로 null(널)값을 가질 수 있다.
- null 값도 초기값으로 사용할 수 있다.
- null 로 초기화된 참조 변수는 스택 영역에 생성된다.

### 2. NullPointerException
- 자바는 프로그램 실행 도중에 발생하는 오류를 예외(Exception)라고 부른다.
- 참조 변수를 사용하면서 가장 많이 발생하는 예외 중 하나가 NullPointerException 이다.
  - 참조 타입 변수를 잘못 사용하면 발생한다.
  - 참조 타입 변수가 null을 가지고 있을 경우, 참조 타입 변수는 사용할 수 없다. 사용하게 되면 NullPointerException이 발생한다.

## 5.5 String 타입
- String 변수에 문자열을 저장한다는 말을 정확한게 아니다.
  - 문자열은 String 객체로 생성되고, 변수는 String 객체를 참조하는게 정확한 표현이다.
  - 문자열 리터럴이 동일하면 Sting 객체는 공유된다.
- new 연산자(객체 생성 연산자)를 사용해 힙 영역에 새로운 객체를 만들 수 있다.
- 문자열이 동일한지 비교하는 메소드 
  - equals() 메소드
    ```java
    boolean result = string1.equals(string2);
    // string1 => 원본 문자열, string2 => 비교 문자열
    ```
    
- String 변수는 참조 타입이므로 초기값으로 null을 대입할 수 있다.